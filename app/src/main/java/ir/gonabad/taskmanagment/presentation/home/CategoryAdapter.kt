package ir.gonabad.taskmanagment.presentation.homeimport android.view.LayoutInflaterimport android.view.ViewGroupimport androidx.appcompat.widget.PopupMenuimport androidx.recyclerview.widget.RecyclerViewimport ir.gonabad.core.domain.listCategory.CategoryListimport ir.gonabad.taskmanagment.Rimport ir.gonabad.taskmanagment.databinding.ItemCategoryBindingclass CategoryAdapter(private val categoryList: CategoryList , private val clickItemMenu: ClickItemMenu) : RecyclerView.Adapter<CategoryAdapter.CategoryAdapterViewHolder>() {    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): CategoryAdapterViewHolder {        return CategoryAdapterViewHolder(ItemCategoryBinding.inflate(LayoutInflater.from(parent.context) , parent , false))    }    override fun getItemCount(): Int {        return categoryList.result.size    }    override fun onBindViewHolder(holder: CategoryAdapterViewHolder, position: Int) {        holder.onBind(categoryList.result[position].last() , categoryList.result[position].first())    }    inner class CategoryAdapterViewHolder(private val categoryBinding: ItemCategoryBinding) : RecyclerView.ViewHolder(categoryBinding.root){        fun onBind(title : String , id: String) {            categoryBinding.cvItemCategoryItem.setOnClickListener {                clickItemMenu.clickItem(id)            }            categoryBinding.tvItemCategoryTitle.text = title            categoryBinding.ivItemCategoryMenu.setOnClickListener {                val popup = PopupMenu(categoryBinding.root.context , categoryBinding.ivItemCategoryMenu)                popup.menuInflater.inflate(R.menu.category_menu , popup.menu)                popup.setOnMenuItemClickListener {                    when(it.itemId){                        R.id.item_categoryMenu_edit -> {                            clickItemMenu.edit(id , title)                        }                        R.id.item_categoryMenu_delet -> {                            clickItemMenu.delete(id)                        }                    }                    return@setOnMenuItemClickListener false                }                popup.show()            }        }    }    interface ClickItemMenu{        fun clickItem(id : String)        fun edit(id : String , title : String)        fun delete(id : String)    }}